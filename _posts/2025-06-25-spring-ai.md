---
title: Spring AI (1.0.0)
date: 2025-06-25 00:00:00 +0900
categories: spring
tags:
  - spring
  - ai
  - docs
  - kotlin
description: Spring AI를 활용하기 위한 Docs 정리
---

![spring-ai1](/assets/img/spring-ai1.svg)

## 1. 개요
---

`Spring AI` 는 불필요한 복잡성 없이 인공지능 기능을 통합한 애플리케이션 개발을 간소화하는 것을 목표로 한다. 즉, 애플리케이션의 데이터나 API를 AI 모델에 연결하는 기능을 제공한다.

![spring-ai2](/assets/img/spring-ai2.svg)

Spring AI는 AI 애플리케이션을 개발하기 위한 기반이 되는 추상화를 제공한다. 이로써, 최소한의 코드 변경으로 쉽게 구성 요소를 교체할 수 있다.

<br/>

Spring AI는 다음과 같은 기능들을 제공한다.

- 채팅, 텍스트-이미지 변환, 임베딩 모델을 위한 모든 주요 AI 모델 제공업체에 `이식 가능한 동기식 및 스트링 API` 를 지원한다.
- `Structured Outputs` - AI 모델 출력을 POJO에 매핑한다.
- 모든 주요 `백터 데이터베이스` (ex. MongoDB, ...)를 지원한다. 
- SQL 유사 메타데이터 필터 API를 포함하여 Vector Store 공급자 전반의 이식 가능한 API이다.
- `Tools/Function Calling` - 모델이 클라이언트 측 도구 및 기능의 실행을 요청하여 필요에 따라 필요한 실시간 정보에 액세스 할 수 있다.
- `Observability` - AI 관련 작업에 대한 인사이트를 제공한다.
- 데이터 엔지니어링을 위한 문서 수집 `ETL framework` 를 지원한다.
- `AI Model Evalutation` - 생성된 콘텐츠를 평가하고 환각 반응으로부터 보호하는 데 도움이 되는 유틸리티이다.
- AI 모델과 벡터 저장소를 위한 Spring Boot 자동 구성 및 스타터 제공
- `ChatClient API` - WebClient와 RestClient와 유사한 API 제공
- `Advisor API` - 반복되는 생성 AI 패턴을 캡슐화하고, LLM과 주고받는 데이터를 변환하며, 다양한 모델과 사용 사례에 걸쳐 이식성을 제공한다.
- `Chat Conversation Memory` 와 `Retrieval Augmented Generation(RAG)` 지원

<br/>

## 2. AI Concepts
---

### 2.1. Models
---

Spring AI는 현재 언어, 이미지, 오디오 형태의 입력과 출력을 처리하는 모델을 지원한다.

<br/>

### 2.2. Prompts
---

ChatGPT의 API에서는 프롬프트 내 텍스트 입력에 역할이 지정된다.
예를 들어, 시스템 역할은 모델이 어떤 방식으로 동작할지를 지시하며, 사용자 역할은 실제 사용자의 입력을 나타낸다.

<br/>

**Prompt Templates**

효과적인 프롬프트를 만들기 위해서는 요청의 컨텍스트를 설정하고, 사용자 입력에 따라 일부 값을 대체하는 구조가 필요하다.

이 과정에서는 전통적인 텍스트 기반 템플릿 엔진을 사용하여 프롬프트를 생성 및 관리한다.
Spring AI는 SpringTemplate 오픈소스 라이브러리를 사용한다.

<br/>

예를 들어, 다음과 같은 프롬프트 템플릿이 있다고 가정해 보자.

```
Tell me a {adjective} joke about {content}
```

<br/>

Spring AI에서 프롬프트 템플릿은 Spring MVC 아키텍처의 "View"와 유사하다.
프롬프트는 초기에는 단순 문자열이지만, 이제는 여러 메시지를 포함하며, 각 메시지는 모델에 지정된 역할을 나타낸다.

<br/>

### 2.3. Embeddings
---

임베딩은 텍스트, 이미지, 비디오 등의 의미를 수치적으로 표현한 것이다.
임베딩은 이러한 입력들을 부동 소수점 숫자의 배열(벡터)로 변환하여 관계성을 캡쳐한다.

임베딩은 RAG(Retrieval Augmented Generation) 패턴처럼 실제 애플리케이션에서 매우 중요한 역할을 한다. 비슷한 주제를 가진 문장은 이 의미 공간에서 서로 가깝게 위치하며, 이는 텍스트 분류, 의미 검색, 상품 추천 등의 작업에 유용하게 사용된다.

<br/>

### 2.4. Tokens
---

토큰은 AI 모델이 작동하는 기본 단위이다.
입력 시에는 단어를 토큰으로 변환하고, 출력 시에는 토큰을 다시 단어로 변환한다.

중요한 점은 "토큰 = 비용" 이라는 점이다.
호스팅된 AI 모델의 사용 요금은 토큰 수에 따라 결정되며, 입력과 출력 모두 토큰을 차지한다.

또한 모델에는 토큰 제한이 있으며, 이를 "컨텍스트 윈도우" 라고 한다.
이 한계를 넘는 텍스트는 모델이 처리하지 않는다.

따라서 데이터를 분할하여 컨텍스트 윈도우에 맞게 제공하는 소프트웨어 전략이 필요하다.
Spring AI는 이러한 작업을 도와주는 기능을 제공한다.

<br/>

### 2.5. Structured Output
---

AI 모델의 출력은 String으로 전달된다.
이 때문에, 원하는 구조로 출력을 얻기 위한 프롬프트 작성과, 이를 애플리케이션에서 사용 가능한 구조로 파싱하는 작업이 필요하다.

구조화된 출력 변환은 정교한 프롬프트를 활용하며, 경우에 따라 여러 번 모델과 상호작용해야 한다.




<br/>

## Reference
---

[Spring AI: Reference Doc.](https://docs.spring.io/spring-ai/reference/index.html)