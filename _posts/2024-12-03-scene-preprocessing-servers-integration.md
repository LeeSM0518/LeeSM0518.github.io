---
title: 영상 전처리 서버 통합 및 개선
date: 2024-12-03 00:00:00 +0900
categories: troubleshooting
tags:
  - troubleshooting
description: 내용
---

## 개요
---

회사에서 영상 전처리 서버를 통합하여 영상 저장을 최적화 했던 작업에 대해 기록하고 회고한다.

<br/>

## 배경 및 목적
---

고객사에서 사용 가능한 GPU 개수에 비해 실행되고 있는 **AI 작업 개수가 월등히 낮다**는 피드백을 받았다. 이를 확인해보기 위해 고객사로 출장을 가서 원인을 분석해보니, 영상을 전처리 하는데 병목이 발생하는 것이 문제였다. 즉, **AI 작업 속도에 비해 영상이 전처리 되고 저장되는 시간이 더 오래 걸리므로** GPU가 사용되지 않는 것 처럼 보였던 것이였다.

영상 전처리의 병목을 해결하기 위해 서버 개수(replicas)를 늘릴 수 있는지 여유 자원을 확인해봤다. 자원이 충분한 것을 확인하고, 영상의 메타데이터를 추출하는 서버와 영상을 COG로 변환하는 **서버의 개수를 각 1개에서 각 3개로 늘려줬다.** 이로 인해, 약 1GB 영상 10개를 동시에 넣어서 전부 처리하는데 소요되는 시간이 6분에서 1분으로 개선되었다. 개선 이전에는 10개 이하로 AI 작업이 수행되었지만 개선 이후에는 20개 이상 수행되는 것을 볼 수 있었다. 

> **COG(Cloud Optimized GeoTIFF)**
> 
> 클라우드 환경에서 대용량 지리 공간 데이터를 효율적으로 저장하고 접근할 수 있도록 최적화된 GeoTIFF 파일 형식
{: .prompt-info }

<br/>

위와 같이 고객사 문제를 해결하고 회사로 복귀하니 다른 문제가 눈에 밟혔다. 